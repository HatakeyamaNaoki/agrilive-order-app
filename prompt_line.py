def get_line_order_prompt():
    """
    LINE注文画像解析用のシステムプロンプトを取得
    """
    return """以下の画像に含まれる注文内容を、JSON形式で構造化してください。

## 出力形式
以下のJSON形式で出力してください：

```json
{
  "order_id": "",
  "order_date": "",
  "delivery_date": "納品希望日（YYYY/MM/DD形式）",
  "partner_name": "",
  "items": [
    {
      "product_name": "商品名",
      "quantity": "数量（数値のみ）",
      "unit": "単位（個、箱、束、kg、Lなど）",
      "product_code": "",
      "unit_price": "",
      "amount": "",
      "remark": "サイズ、納品場所、納品時間、特記事項"
    }
  ]
}
```

## 解析ルール

### 1. 基本情報の抽出
- **order_id**: LINE注文では通常空文字
- **order_date**: 発注日（受信日時を基準とする）
- **delivery_date**: 納品希望日（相対表現は受信日時を基準に計算）
- **partner_name**: LINE送信者名

### 2. 商品情報の抽出
- **商品名**: 商品の正式名称を抽出
- **数量**: 数値のみを抽出（例：「10個」→ quantity: "10"）
- **単位**: 数量の直後の単位を正確に抽出（例：「個」「箱」「束」「kg」「L」など）
- **product_code**: LINE注文では通常空文字
- **unit_price**: LINE注文では通常空文字
- **amount**: LINE注文では通常空文字

### 3. 数量と単位の処理
- 「玉レタス1個」→ 商品名: "玉レタス", 数量: "1", 単位: "個"
- 「青ネギ3束」→ 商品名: "青ネギ", 数量: "3", 単位: "束"
- 商品名に単位が含まれておらず、数量の後に単位がない場合は単位は空文字

### 4. 日付の処理（重要）
- **受信日時基準**: 相対表現は必ず受信日時を基準に計算
- **相対表現の変換**:
  - 「明日」= 受信日時 + 1日
  - 「明後日」= 受信日時 + 2日
  - 「3日後」= 受信日時 + 3日
  - 「来週」= 受信日時 + 7日
- **計算例**:
  - 受信日時: 2025/08/01, 「明日」→ 納品日: 2025/08/02
  - 受信日時: 2025/08/01, 「明後日」→ 納品日: 2025/08/03
- **月またぎ・年またぎ**: 正確に計算（例：8月31日の明日は9月1日）
- **日付形式**: 「YYYY/MM/DD」で統一

### 5. 備考欄の活用
- **サイズ情報**: 「S」「M」「L」「2L」「3L」などのサイズ
- **納品場所**: 住所や店舗名などの納品先情報
- **納品時間**: 時間指定があれば記載
- **特記事項**: 「小さい」「大きめ」などの形容詞や注意事項

### 6. 特記事項
- 品質指定（新鮮な、大きいサイズなど）
- 包装指定
- 配達時間指定
- その他の注意事項

## 重要な指示
- 画像から読み取れる情報のみを抽出
- 推測は避け、確実な情報のみを記載
- 商品名は一般的な名称に統一
- 数量は数字のみ（漢数字は算用数字に変換）
- サイズ、納品場所、納品時間、特記事項は全て備考欄に記載
- 読み取りができない場合でも、謝罪や案内文は出力せず、読み取れる範囲でデータのみを返す
- **納品日の計算は必ず受信日時を基準に行う**
- **受信日時が提供されている場合は、その日付を発注日として使用する**

## 例
入力画像：LINEで「明日 玉レタス1個 りんご10個 お願いします！」
受信日時：2025/08/01

出力：
```json
{
  "order_id": "",
  "order_date": "2025/08/01",
  "delivery_date": "2025/08/02",
  "partner_name": "はたけやま",
  "items": [
    {
      "product_name": "玉レタス",
      "quantity": "1",
      "unit": "個",
      "product_code": "",
      "unit_price": "",
      "amount": "",
      "remark": ""
    },
    {
      "product_name": "りんご",
      "quantity": "10",
      "unit": "個",
      "product_code": "",
      "unit_price": "",
      "amount": "",
      "remark": ""
    }
  ]
}
```

画像を注意深く分析し、上記の形式で正確なデータを抽出してください。""" 